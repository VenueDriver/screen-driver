<div class="schedule-container">

    <div *ngIf="validationResult.validationMessage" class="validation-error message">
        {{validationResult.validationMessage}}
    </div>

    <div *ngIf="isCreationMode() && !validationResult.validationMessage" class="message header-message">
        Create new schedule
    </div>

    <div class="schedule-form-container">
        <div class="change-state-container">
            <div class="title" *ngIf="schedule && !isEditMode()">
                <toggle-button class="change-state-button"
                               [enabled]="schedule.enabled"
                               (changed)="changeScheduleState($event)">
                </toggle-button>
            </div>
        </div>

        <div class="schedule-type-container">
            <div class="title">
                Schedule type:
            </div>
            <autocomplete
                    class="schedule-type"
                    [editable]="true"
                    [disabled]="!editable"
                    [itemsMap]="scheduleTypes"
                    [value]="eventTime.periodicity"
                    (valueChanged)="setScheduleType($event)">
            </autocomplete>
        </div>

        <div *ngIf="eventTime.periodicity === scheduleTypes.WEEKLY"
             class="days-of-week-container">

            <div class="title">
                Day of week:
            </div>
            <autocomplete
                    class="day-of-week"
                    [editable]="true"
                    [disabled]="!editable"
                    [itemsMap]="daysOfWeek"
                    [value]="eventTime.dayOfWeek"
                    (valueChanged)="setDayOfWeek($event)">
            </autocomplete>
        </div>

        <div *ngIf="eventTime.periodicity === scheduleTypes.ONE_TIME_EVENT"
             class="datepicker-container">

            <div class="title">
                Start event date:
            </div>
            <material-datepicker
                    class="datepicker"
                    [disabled]="!editable"
                    [(date)]="eventTime.startDate"
                    (onSelect)="onStartDateSelect()"
                    dateFormat="MM-DD-YYYY">
            </material-datepicker>

            <div class="title">
                End event date:
            </div>
            <material-datepicker
                    class="datepicker"
                    [disabled]="!editable"
                    [(date)]="eventTime.endDate"
                    (onSelect)="onEndDateSelect()"
                    dateFormat="MM-DD-YYYY">
            </material-datepicker>
        </div>

        <div class="time-selector-container">
            <div class="title">
                Start event time:
            </div>
            <div class="time-selector">
                <autocomplete
                        class="time"
                        [placeholder]="'Select time'"
                        [editable]="true"
                        [disabled]="!editable"
                        [items]="timeItems"
                        [value]="eventTime.startTime"
                        (valueChanged)="setTime('startTime', $event)">
                </autocomplete>

                <autocomplete
                        class="period"
                        [editable]="true"
                        [disabled]="!editable"
                        [items]="timePeriods"
                        [value]="eventTime.startTimePeriod"
                        (valueChanged)="setTime('startTimePeriod', $event)">
                </autocomplete>
            </div>

            <div class="title">
                End event time:
            </div>
            <div class="time-selector">
                <autocomplete
                        class="time"
                        [placeholder]="'Select time'"
                        [editable]="true"
                        [disabled]="!editable"
                        [items]="timeItems"
                        [value]="eventTime.endTime"
                        (valueChanged)="setTime('endTime', $event)">
                </autocomplete>

                <autocomplete
                        class="period"
                        [editable]="true"
                        [disabled]="!editable"
                        [items]="timePeriods"
                        [value]="eventTime.endTimePeriod"
                        (valueChanged)="setTime('endTimePeriod', $event)">
                </autocomplete>
            </div>
        </div>

    </div>

    <div class="buttons-container">
        <button *ngIf="isCreationMode()"
                class="btn btn-success"
                (click)="performCreatingSubmit()"
                [disabled]="!validationResult.isValid">
            Create
        </button>

        <button *ngIf="isEditMode()"
                class="btn btn-success"
                (click)="performUpdatingSubmit()"
                [disabled]="!validationResult.isValid">
            Save
        </button>

        <button *ngIf="isEditMode() || isCreationMode()"
                class="btn btn-link"
                (click)="performCancel()">
            Cancel
        </button>
    </div>
</div>