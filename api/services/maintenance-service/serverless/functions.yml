authorizer:
  handler: src/auth/authorizer.handler

get_pusher_config:
  handler: src/notifier/notification_config.getConfig
  environment: ${self:custom.properties.pusher}
  events:
    - http:
        path: api/screens/notification-config
        method: get
        cors: true

get_screen_update_schedules:
  handler: src/screen_update_schedule/screen_update_schedule.getAll
  events:
    - http:
        path: api/screens/update-schedule
        method: get
        cors: true

put_screen_update_schedules:
  handler: src/screen_update_schedule/screen_update_schedule.put
  events:
    - http:
        path: api/screens/update-schedule
        method: put
        cors: true
        authorizer: ${self:custom.authorizer}

refresh_screens:
  handler: src/screen_notifications/refresh_screens.refresh
  environment: ${self:custom.properties.pusher}
  events:
    - http:
        path: api/screens/refresh
        method: post
        cors: true
        authorizer: ${self:custom.authorizer}

update_clients_app:
  handler: src/screen_notifications/update_clients.update
  environment: ${self:custom.properties.pusher}
  events:
    - http:
        path: api/screens/update-applications
        method: post
        cors: true
        authorizer: ${self:custom.authorizer}

register_kiosk_version:
  handler: src/kiosk_version/kiosk_version.register
  events:
    - http:
        path: api/screens/version
        method: post
        cors: true
